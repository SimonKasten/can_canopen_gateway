
import can
import time

#bus = can.ThreadSafeBus(bustype='socketcan', channel='vcan0', bitrate=500000)
bus = can.ThreadSafeBus(bustype='vector', app_name='CANalyzer', channel=0, bitrate=500000)   # CAN2
bus2 = can.ThreadSafeBus(bustype='vector', app_name='CANalyzer', channel=1, bitrate=500000)  # CAN3

msg = can.Message(arbitration_id=0x1,
                    data=[0x0, 0x0, 0, 0x8, 0x9a, 0x99, 0x99, 0x41],
                    is_extended_id=True)
msg2 = can.Message(arbitration_id=0x1, dlc=3,
                    data=[0x0, 0x11, 11],
                    is_extended_id=True)

try:
   for i in range(1000):
      bus.send(msg)
      bus2.send(msg2)
      print("Message sent on {}".format(bus.channel_info))
      print("Message sent on {}".format(bus2.channel_info))
      time.sleep(0.1)
except can.CanError:
   print("Message NOT sent")